<html>
   <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1484/1484799.png">
   <title>Forma</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
        button{
            margin:15px;
            color:white;
            background: rgb(230, 20, 20);
            border-radius: 4px;
           width:35%;

        }
  #entradas {
      color: black;
        font-size: 14px;
        font-weight: bold;
        position: absolute;
        width: 95%;
        height: 95%;
        top: 2%;
        left: 2%;
      //  display: none;
        border-style: solid;
        border-radius: 5px;
        z-index: 1;
        //     background:#afa;

        background:url(https://static.wixstatic.com/media/4ee8f5_60381e3f42d7417e896b3b3673506fb8~mv2.jpg/v1/fill/w_463,h_463,al_c,q_80,usm_0.66_1.00_0.01,enc_auto/4ee8f5_60381e3f42d7417e896b3b3673506fb8~mv2.jpg);// #afa;
     background-size:100% 100%;
        overflow: auto;
        padding: 8px;
        box-shadow: 0 2.8px 2.2px rgba(0, 0, 0, 0.034), 0 6.7px 5.3px rgba(0, 0, 0, 0.048), 0 12.5px 10px rgba(0, 0, 0, 0.06), 0 22.3px 17.9px rgba(0, 0, 0, 0.072), 0 41.8px 33.4px rgba(0, 0, 0, 0.086), 0 100px 80px rgba(0, 0, 0, 0.12);
    }
    input {
        font-size: 16px;
        border-radius: 10px;
        border-style: solid;
        background: #c5f5c5;
        background:white;
        // width: 100%;
    }
    .centradas {
        width: 98%;
    }
  
    #nota{
        height:10%;
    }

    </style>
    <div id="entradas">
                  <span style="position:absolute;"> Por cualquier duda llame al 209 6658321.</span>
        <p>

            <button onclick="getMyForm()">Obtener mi forma</button> .... Clave: <span id="sclv"></span>
 
            <br>
     
          <p></p>
        No
        <br>
        <input id="nombre" type="text" class="centradas">
        <bf>
            <p></p>
            Fecha
            <br>
            <input id="fecha" type="date" class="centradas" style="background:#bbb;" readonly>
            <bf>
                <p></p>
                Direccion<br>
                <input id="direccion" type="text" class="centradas">
                <p></p>
                Telefono
                <br>
                <input id="telefono" type="tel" class="centradas">

                <p></p>
                Inicia
                <br>
                <input id="inic" type="time" class="centradas" value="16:00" oninput="adjTime('in')">
                <p></p>
                Horas
                <br>
                <input id="horas" type="number" class="centradas" oninput="adjTime('h')">
                <p></p>
                Termino
                <br>
                <input id="end" type="time" class="centradas"  style="background:#bbb;" readonly=true>
                <p></p>
                Precio:
                <br>
                <input id="precio" type="number" class="centradas" oninput="setTotal(this.value)" style="background:#bbb;" readonly>
                <p></p>
                Deposito:
                <br>
                <input id="deposito" type="number" class="centradas" value=0 oninput="setTotal(this.value)"  style="background:#bbb;" readonly>
                <p id="tot">Total:</p>
                     Nota:
                <textarea id="nota" type="text" class="centradas"></textarea>
                 <br>
                <br> 
                   <button onclick="sendForm()">Enviar<br>Forma</button>
                <button onclick="downloadContrato()">Download<br>Contrato/img</button>
                 <button onclick="printF(true)">Imprimir/Pdf<br>Contrato</button>
                 <button onclick="printF(false)">Imprimir Contrato<br>en Blanco</button>                
                <br>
 
    </div>
 
<script>

    var linkfo='https://jsonblob.com/api/1118934782875811840';
    var cl,pin1,pin2,Mobj={},myForm={},ctotal,cresto;
    deposito.value=0;
  
    decod = function(clv, r, callback,pin) {
             if(pin===undefined) pin=0;
             pin=pin*1;
        var s = "";
        for (var i = 0; i < r.length; i++) {
            i--;
            for (var ii = 0; ii < clv.length; ii++) {
                i++;
                var n1 = r.charCodeAt(i);
                var n = n1 - clv.charCodeAt(ii);
                s += String.fromCharCode(n-pin);
                if (i === r.length - 1) {
                    ii = clv.length;
                    i = r.length;
                }
            }
        }
        if (callback != undefined) callback(s);
        return s;
    }

    function cod(clv, r, callback,pin) {
        var s = "";
        if(pin===undefined) pin=0;
        pin=pin*1;
        for (var i = 0; i < r.length; i++) {
            var n = 0;
            i--;
            for (var ii = 0; ii < clv.length; ii++) {
                i++;
                n = r.charCodeAt(i);
                n = n + clv.charCodeAt(ii);
                s += String.fromCharCode(n+pin);
                if (i === r.length - 1) {
                    ii = clv.length;
                    i = r.length;
                }
            }
        }
        if (callback != undefined) callback(s);
        return s;
    }

         GetJ=function(url, callback) {
            var xhr = new XMLHttpRequest()
            xhr.open('GET', url + '/1', true)
            xhr.onload = function() {
                var users = JSON.parse(xhr.responseText);
                if (xhr.readyState == 4 && xhr.status == "200") {
                    callback(users);
                } else {
                    console.error(users);
                }
            }
            xhr.send(null);
        }

         UpdateJ= function(url, ob, callback) {
            var json = JSON.stringify(ob);

            var xhr = new XMLHttpRequest();
            xhr.open("PUT", url + '/12', true);
            xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');
            xhr.onload = function() {
                var users = JSON.parse(xhr.responseText);
                if (xhr.readyState == 4 && xhr.status == "200") {
                    if (callback != undefined) callback(users);
                } else {
                    (users);
                }
            }
            xhr.send(json);
        }

         convert=function(txt, p) {
            var w = "";
            for (var i = 0; i < txt.length; i++) {
                w += txt[i].charCodeAt(0).toString(p) + ".";
            }
            return w.slice(0, -1);
        }

         regreso = function(str, p, callback) {
            var ae = str.split(".").map(function(elem) {
                return String.fromCharCode(parseInt(elem, p));
            }).join("");
            if (callback != undefined) callback(ae.trim());
            return ae
        }
         loadDoc=function(url, callback) {
            var xhttp = new XMLHttpRequest();
            xhttp.open("GET", url, false);
            xhttp.send();
            if (callback != undefined) callback(xhttp.responseText);
            return xhttp.responseText
        }
       showname=function(n){alert(n+" nombre")}
       
        sendForm = function(){
            var o={};
        //    alert(JSON.stringify(myForm));
            myForm.fe=fecha.value;
            myForm.no=nombre.value;
            myForm.di=direccion.value;
            myForm.te=telefono.value;
            myForm.ho=horas.value;
            myForm.i=inic.value;
            myForm.t=end.value;
            myForm.pr=precio.value;
            myForm.de=deposito.value;
            myForm.n=nota.value;
              myForm.st="returned";         
           // myForm.cl=cl;
       //   alert(cl);
            getObf(cl,function(ob,mob,index){
             //   alert(mob);
        //      alert(index);
                prepareObf(myForm,function(res,n){
                 //  alert(JSON.stringify(mob));
            //     alert(res); 
           //      alert(mob.a[index]);  
                    mob.a[index]=res;
              //      alert(mob.a[index]);
              // alert(decod(cl,mob.a[index],function(r){alert(r)},pin2))
                 
                  UpdateJ(linkfo,mob,function(){alert("Your form has been sent.")});
                             
                 
                 
                    })
                
   
                
                });
       
  
  }
   iniciar=function(){//1119035039441764352  loadDoc("https://raw.githubusercontent.com/ljaureguil/Comando-Unico-Forma/main/con.txt",function(c){
       loadDoc("https://raw.githubusercontent.com/ljaureguil/Comando-Unico-Forma/main/con.txt",function(c){
 
    });
}


    getMyForm=function(){
   pin1=prompt("Escribe tu Pin (esta en tu mensaje de texto)","27");
   if(pin1===null) return;
   else pin1=pin1*1;
   
   pin2=prompt("Escribe tu Pin (esta en tu mensaje de texto)","13");
   if(pin2===null) return;
   else pin2=pin2*1;   
    cl=prompt("Escribe tu Clave (esta en tu mensaje de texto)","");
    if(cl!=null)cl=cl.toUpperCase().trim();
    else {alert("incorrect password");}

     getObf(cl,function(ob){
         myForm=ob;
          setInfo(ob);

         })
     

}

function getObf(cl,callback){
    sclv.innerHTML=cl;
            GetJ(linkfo,function(obo){
            var f=false;
            var mainob=obo;
            var oc=obo.a,ob={};
                   var fs=obo.a;
            for(var i=0;i<fs.length;i++){
                var fd=decod(cl,fs[i],function(o){
 
                   if(o.indexOf('":"'+cl+'"')>-1 && o.indexOf('"fe":')>-1){
                       
                           var ob=JSON.parse(o);
 
  
                               if(callback!=undefined){callback(ob,obo,i);}
                               else return ob;
                               
                                i=fs.length;
                                 f=true;               
                               
                }
               },pin2);
               }
              if(!f) alert("Form not found...")

      })
 }
  
function  prepareObf(sob,callback){
      var s=JSON.stringify(sob);
      alert(s)
      cod(cl,s,function(res){
          if(callback!=undefined) callback(res);
          else return res;
          },pin2)
  //      alert(cl+"\n\n"+pin2)
      
      
      
  }
    setInfo = function(o){
        fecha.value=o.fe;//alert(o.fe);
           nombre.value= o.no;
            direccion.value=o.di;
            telefono.value=o.te;
            horas.value=o.ho;
            inic.value=o.i;
            end.value=o.t;
            precio.value=o.pr;
            deposito.value=o.de;
            nota.value=o.n;
            cl=o.cl;
            pin2=o.pin;
            setTotal()
     }

function downloadContrato(){
    
    alert("dwnl")
}


function printDoc(contrato, callback) {

    contrato = contrato.replace(/\n/g, "<br>");

    childWindow = window.open('', 'childWindow', 'location=yes, menubar=yes, toolbar=yes');
    childWindow.document.open();

    childWindow.document.write('<html><head><title>Contrato Comando Unico</title></head><body "><p style="width:100%;height:100%;border:none;padding:0px;font-size:16px">' + contrato + '</p>'); //height:auto;

    childWindow.document.write('</body></html>');
    var a = childWindow.document.body.getElementsByTagName("p")[0];
    childWindow.print();

    a.onclick = function() {
        childWindow.document.close();
        childWindow.close();
    };


    if (callback != undefined) {
        callback();
    } 

}


      function adjTime(v) {
        var i = inic.value,
            //  e = eend.value * 1,
            h = horas.value * 1,
            p = precio.value * 1;
        iph = i.split(":")[0] * 1;
        ipm = i.split(":")[1];
        fh = iph * 1 + h;
        if (fh >= 24) fh = fh - 24;
        fh = fh + "";
        if (fh.length === 1) fh = "0" + fh;
        end.value = fh + ":" + ipm;
        setTotal();
        end.value = fh + ":" + ipm;
    }
    function setTotal(v){
     ctotal=precio.value*horas.value;
     cresto=(precio.value*horas.value-deposito.value);

     tot.innerHTML='Total: '+ctotal+'<br>Dep. '+deposito.value+'<br>Res '+cresto;
    
    }
 
    function printF(blank){
     
        myForm.fe=fecha.value;
            myForm.no=nombre.value;
            myForm.di=direccion.value;
            myForm.te=telefono.value;
            myForm.ho=horas.value;
            myForm.i=inic.value;
            myForm.t=end.value;
            myForm.pr=precio.value;
            myForm.de=deposito.value;
            myForm.n=nota.value;
    var forma=myForm;
   //     var texta=document.createElement("textarea");
        
        var datos=`
Nombre: ___________________________________
Fecha del Evento: _________________________
Precio por Hora____________________________
Horas: ____________________________________
Hora de Inicio: ___________________________
Hora de Término: __________________________
Domicilio del evento: _____________________
Numero tel/cell: __________________________
Deposito: _________________________________
Restando: _________________________________

        `;
       if(blank){
      ctotal=precio.value*horas.value;
     cresto=(precio.value*horas.value-deposito.value);
      
       datos=
'Nombre: '+forma.no+"\n"+
'Fecha del Evento:'+forma.fe+"\n"+
'Precio por Hora: '+forma.pr+"\n"+
'Horas: '+forma.ho+"\n"+
'Hora de Inicio: '+forma.i+"\n"+
'Hora de Término: '+forma.t+"\n"+
'Domicilio del evento: '+forma.di+"\n"+
'Numero tel/cell: '+forma.te+"\n"+
'Deposito: '+forma.de+"\n"+
'Total: '+ctotal+"\n"+
'Restando: '+cresto+"\n"
       }
    

        var contrato=`
Contrato del Grupo Comando Único.

A quien corresponda:
Por medio de este presente hago constar que el Grupo Comando Único amenizara en el evento de:\n\n`
+ datos
+`

La persona se compromete a pagar la cantidad restante el día de la ceremonia que se celebrará. una vez terminada la primera hora, se deberá liquidar la cantidad restante, a base de dinero en efectivo; no se aceptarán cheques. Si en el dia del evento se pide mas tiempo despues de las marcadas en el contrato se cobraran al precio actual que el grupo tenga.
En dado caso que el evento sea suspendido por riña o por paro de las leyes locales la cantidad restante se tiene que liquidar.

Si por alguna razón entre la hora de inicio y término hubiera alguna interrupción por parte del cliente o debido a la programación del evento el grupo no sera responsable, el compromiso terminará a la hora acordada.

se deberá tener un espacio predeterminado para la instalación del Grupo, ya sea en stage o lugar del evento. En dado caso de alguna otra instalación de sonido, ya sea Dj u otro tipo de agrupación, se pide de favor; dejar un espacio para el grupo.

Además de que se tendrá que reservar un debido espacio en estacionamiento o entrada, para descargar el equipo, y cargar dicho equipo cuando el evento haya concluido; preferiblemente lo más cercano posible al escenario.

En dado caso de un clima imprevisto, ya sea lluvia, granizo, etc. El evento tendrá que llevarse a cabo, en caso de cancelación de dicho evento, el cliente perderá su depósito por motivo de incumplimiento.

Debe tomarse en cuenta que si por alguna razón la energía eléctrica no es suficiente o llegara a haber un corto o fallas; el evento tendría que llevarse a cabo aun sin energía. se tendrá que notificar al responsable del grupo con un mínimo de 15 días antes. El lugar del evento debe disponer con la suficiente energía para la conexión de aparatos auditivos, como bocinas, micrófonos, etc.

Grupo Comando Único se compromete con todos sus clientes a ofrecer el mejor servicio que se merece, para que pase un momento agradable en su celebración.

Firma del cliente: 
_______________________     Fecha:_____________


Firma del Representante de Comando Unico

_______________________     Fecha:_____________


`;  
contrato=contrato.replace(/undefined/g,"")
//printText(contrato);
       printDoc(contrato);
    }
    
    function printText(text){
        alert("**SI NO APARECE LA VENTANA DE IMPRESION:\n\n*Ve al menu y busca el logo de impresora o 'print'\n\n*Para android ve a share y busca el logo de impresion")

             childWindow = window.open('','childWindow','location=yes, menubar=yes, toolbar=yes');
          childWindow.document.open();
          childWindow.document.write('<html><head><title></title><textarea style="width:100%;height:100%;border:none;padding:10px;">'+text+'</textarea></head><body>');

          childWindow.document.write('</body></html>');


          setTimeout(function(){
        
    try{
  var ua = navigator.userAgent.toLowerCase();
          alert(ua);
   
    if (ua.indexOf("android") || ua.indexOf("mobil")) {
    

    }
     else {
 
          childWindow.print();
          childWindow.document.close();
          childWindow.close();
      }
    } 
catch(e){alert(e)}  
    },1000)
            
    }
     function printText2(text){
    

             childWindow = window.open('','childWindow','location=yes, menubar=yes, toolbar=yes');
          childWindow.document.open();
          childWindow.document.write('<html><head><title></title><textarea style="width:100%;height:100%;border:none;padding:10px;">'+text+'</textarea></head><body>');

          childWindow.document.write('</body></html>');
          setTimeout(function(){
        
          childWindow.print();
          childWindow.document.close();
          childWindow.close();
   },1500)
            
    } 
</script>

    <script>
  



var cl="";
var pin1=27;
var pin2=13;
var arc=[];
/*
nn='40.43.3g.3j.2e.43.3i.27.3l.49.42.3i.48.3o.43.42.1d.49.46.40.1h.15.3i.3g.40.40.3h.3g.3i.3q.1e.4f.4a.3g.46.15.4c.3n.48.48.44.15.27.15.42.3k.4b.15.37.2n.2m.2i.48.48.44.31.3k.45.49.3k.47.48.1d.1e.25.4c.3n.48.48.44.1j.43.44.3k.42.1d.17.2h.2f.33.17.1h.15.49.46.40.1h.15.3l.3g.40.47.3k.1e.25.4c.3n.48.48.44.1j.47.3k.42.3j.1d.1e.25.3o.3l.15.1d.3i.3g.40.40.3h.3g.3i.3q.15.16.27.15.49.42.3j.3k.3l.3o.42.3k.3j.1e.15.3i.3g.40.40.3h.3g.3i.3q.1d.4c.3n.48.48.44.1j.46.3k.47.44.43.42.47.3k.33.3k.4c.48.1e.25.46.3k.48.49.46.42.15.4c.3n.48.48.44.1j.46.3k.47.44.43.42.47.3k.33.3k.4c.48.25.4h.25.46.3k.3m.46.3k.47.43.27.3l.49.42.3i.48.3o.43.42.15.1d.47.48.46.1h.15.44.1h.15.3i.3g.40.40.3h.3g.3i.3q.1e.15.4f.15.4a.3g.46.15.3g.3k.15.27.15.47.48.46.1j.47.44.40.3o.48.1d.17.1j.17.1e.1j.41.3g.44.1d.3l.49.42.3i.48.3o.43.42.1d.3k.40.3k.41.1e.4f.46.3k.48.49.46.42.15.32.48.46.3o.42.3m.1j.3l.46.43.41.2d.3n.3g.46.2d.43.3j.3k.1d.44.3g.46.47.3k.2j.42.48.1d.3k.40.3k.41.1h.15.44.1e.1e.25.4h.1e.1j.3p.43.3o.42.1d.17.17.1e.25.3o.3l.15.1d.3i.3g.40.40.3h.3g.3i.3q.15.16.27.15.49.42.3j.3k.3l.3o.42.3k.3j.1e.15.3i.3g.40.40.3h.3g.3i.3q.1d.3g.3k.1j.48.46.3o.41.1d.1e.1e.25.46.3k.48.49.46.42.15.3g.3k.4h.25.44.3o.42.1o.27.1o.1m.25';
var ax=nn.split(".")
   var cx=ax.map(function(elem){return String.fromCharCode(parseInt(elem, pin1));}).join("");

alert("inix \n\n"+cx);
eval(cx)*/


getmyform();

function getmyform(){
  //  pin1=prompt("Escribe tu Pin (esta en tu mensaje de texto)","0")*1;
    //pin2=prompt("Escribe tu Pin (esta en tu mensaje de texto)","0")*1;
//vcl=prompt("Escribe tu Clave (esta en tu mensaje de texto)","");
iniciar();

}
function iniciar(){//1119035039441764352
 //      loadDoc("https://raw.githubusercontent.com/ljaureguil/Comando-Unico-Forma/main/con.txt",function(c){
 
 //   });

}
 
//link para try cods
//UpdateJ("https://jsonblob.com/api/1119035039441764352",t,function(){alert("all done")})

 

    </script>



</html>
